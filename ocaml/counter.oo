interface Counter {
  add(x : int) : Unit
  get(x : int) : int
}

class Cell implements Counter {
  cnt : int
  def init(n : int) : Unit {
    this.cnt = n
  }
  def add(n : int) : Unit {
    let cnt = this.cnt in
      this.cnt = (cnt + n)
  }
  def get(tmp : int) : int {
    this.cnt
  }
}

let cell = new Cell in
let cell2 = cell in
let tmp = cell.init(0) in
  finish {
    async {
      lock(cell) in cell.add(1)
    }
    async {
      lock(cell2) in cell2.add(2)
    }
  };
  cell.get(0)
